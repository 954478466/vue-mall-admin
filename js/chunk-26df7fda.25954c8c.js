(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26df7fda"],{3643:function(e,t,r){"use strict";r("52a2")},"48ba":function(e,t,r){"use strict";r("b43c")},"52a2":function(e,t,r){},ab79:function(e,t,r){"use strict";r("b64c")},b43c:function(e,t,r){},b64c:function(e,t,r){},ed8a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-detail"},[r("a-steps",{staticClass:"product-step",attrs:{current:e.current}},e._l(e.steps,(function(e){return r("a-step",{key:e.title,attrs:{title:e.title}})})),1),r("div",{staticClass:"steps-content"},[0===e.current?r("BaseDetail",{attrs:{form:e.form},on:{next:e.next}}):1===e.current?r("SaleDetail",{attrs:{form:e.form},on:{next:e.next,prev:e.prev}}):e._e()],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"basic-detail"},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":{span:5},"wrapper-col":{span:13}}},[r("a-form-model-item",{attrs:{label:"标题",prop:"title",required:""}},[r("a-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"商品描述",prop:"desc"}},[r("a-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("a-form-model-item",{attrs:{label:"商品类目",required:"",prop:"category"}},[r("a-select",{attrs:{placeholder:"请选择商品类别"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.$store.state.categoryList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),r("a-select",{attrs:{placeholder:"请添加子类目"},model:{value:e.form.c_item,callback:function(t){e.$set(e.form,"c_item",t)},expression:"form.c_item"}},e._l(e.getCategoryItems,(function(t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"商品标签",prop:"tags",required:""}},[r("a-select",{attrs:{mode:"tags",placeholder:"Please select","default-value":["包邮，最晚次日达"]},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},[r("a-select-option",{attrs:{value:"包邮，最晚次日达"}},[e._v("包邮，最晚次日达")])],1)],1),r("a-form-model-item",{staticClass:"next-btn",attrs:{label:"",wrapperCol:{span:24}}},[r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")])],1)],1)],1)}),o=[],l={data:function(){return{}},props:["form"],created:function(){0===this.$store.state.categoryList.length&&this.$store.dispatch("setCategoryList")},computed:{getCategoryItems:function(){for(var e=0;e<this.$store.state.categoryList.length;e+=1){var t=this.$store.state.categoryList[e];if(t.id===this.form.category)return t.c_items}return[]}},methods:{next:function(){var e=this;this.$refs.ruleForm.validate((function(t){return!!t&&(e.$emit("next",e.form),!0)}))}}},c=l,u=(r("3643"),r("2877")),m=Object(u["a"])(c,s,o,!1,null,null,null),f=m.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sale-detail"},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":{span:5},"wrapper-col":{span:13}}},[r("a-form-model-item",{attrs:{label:"商品售价",prop:"price",required:""}},[r("a-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("a-form-model-item",{attrs:{label:"折扣价格",prop:"price_off"}},[r("a-input",{model:{value:e.form.price_off,callback:function(t){e.$set(e.form,"price_off",t)},expression:"form.price_off"}})],1),r("a-form-model-item",{attrs:{label:"商品库存",required:"",prop:"inventory"}},[r("a-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}})],1),r("a-form-model-item",{attrs:{label:"计量单位",prop:"unit",required:""}},[r("a-input",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),r("a-form-model-item",{attrs:{label:"商品相册",prop:"images"}},[r("div",{staticClass:"clearfix"},[r("a-upload",{attrs:{action:e.action,"list-type":"picture-card","file-list":e.fileList,name:"avatar"},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?r("div",[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),r("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)]),r("a-form-model-item",{staticClass:"next-btn",attrs:{label:"",wrapperCol:{span:24}}},[r("a-button",{staticClass:"prev",on:{click:e.prev}},[e._v("上一步")]),r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("提交")])],1)],1)],1)},d=[];r("d3b7"),r("d81d"),r("4de4");function v(e){return new Promise((function(t,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return r(e)}}))}var b={created:function(){this.action=this.$api.getUploadImageUrl(),this.fileList=this.form.images.map((function(e,t){return{uid:t,name:"image".concat(t,".png"),status:"done",url:e}}))},data:function(){return{previewVisible:!1,previewImage:"",fileList:[],action:""}},props:["form"],methods:{next:function(){var e=this;this.$refs.ruleForm.validate((function(t){return!!t&&(e.$emit("next",e.form),!0)}))},prev:function(){this.$emit("prev",this.form)},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e,a.url||a.preview){r.next=5;break}return r.next=4,v(a.originFileObj);case 4:a.preview=r.sent;case 5:t.previewImage=a.url||a.preview,t.previewVisible=!0;case 7:case"end":return r.stop()}}),r)})))()},handleChange:function(e){var t=e.file,r=e.fileList;"done"===t.status?this.form.images.push(t.response.data.url):"removed"===t.status&&(this.form.images=this.form.images.filter((function(e){return t.url!==e}))),this.fileList=r}}},h=b,g=(r("ab79"),Object(u["a"])(h,p,d,!1,null,null,null)),x=g.exports,w={data:function(){return{current:0,steps:[{title:"填写商品基本信息"},{title:"填写商品销售信息"}],form:{title:"",desc:"",category:"",c_items:[],tags:[],price:0,price_off:0,unit:"",inventory:0,images:[]}}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.query.id,!r){t.next=6;break}return t.next=4,e.$api.getProductionById(r);case 4:a=t.sent,e.form=a.data;case 6:case"end":return t.stop()}}),t)})))()},methods:{next:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.current){t.next=16;break}if(r=e.$route.query.id,!r){t.next=8;break}return t.next=5,e.$api.editProduction(e.form);case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,e.$api.uploadImageUrl(e.form);case 10:a=t.sent;case 11:n="success"===a.status?"success":"error",e.$message[n](a.msg),e.$router.push({name:"ProductList"}),t.next=17;break;case 16:e.current+=1;case 17:case"end":return t.stop()}}),t)})))()},prev:function(){this.current-=1}},components:{BaseDetail:f,SaleDetail:x}},y=w,$=(r("48ba"),Object(u["a"])(y,a,n,!1,null,"0b509b8c",null));t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-26df7fda.25954c8c.js.map